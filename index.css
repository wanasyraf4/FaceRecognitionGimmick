
/* === Particle Canvas Background === */
#particle-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
}

/* === Scanning Effects === */
.filter-scanning {
  filter: sepia(0.5) hue-rotate(170deg) contrast(1.2) brightness(1.1) saturate(0.8);
}

@keyframes scan-beam {
  0% { top: 0%; opacity: 0; }
  10% { opacity: 1; box-shadow: 0 0 40px cyan; }
  90% { opacity: 1; }
  100% { top: 100%; opacity: 0; }
}

.animate-scan-beam {
  animation: scan-beam 2s ease-in-out infinite;
}

@keyframes scan-beam-vertical {
  0% { left: 0%; opacity: 0; }
  10% { opacity: 1; box-shadow: 0 0 40px cyan; }
  90% { opacity: 1; }
  100% { left: 100%; opacity: 0; }
}

.animate-scan-beam-vertical {
  animation: scan-beam-vertical 3s ease-in-out infinite; /* Different speed for variety */
}

@keyframes scan-down {
    from { background-position: 0 0; }
    to { background-position: 0 100%; }
}

.animate-scan-down {
    animation: scan-down 1s linear infinite;
}

@keyframes spin-right {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes spin-left {
  from { transform: rotate(360deg); }
  to { transform: rotate(0deg); }
}

.animate-spin-slow-right {
  animation: spin-right 8s linear infinite;
}

.animate-spin-slow-left {
  animation: spin-left 5s linear infinite;
}

/* === NEW Face Mesh Animations === */

/* 3D Container Movement */
.animate-face-3d-scan {
    transform-origin: 50% 50%;
    animation: face-3d-scan-move 5s ease-in-out infinite alternate;
}

@keyframes face-3d-scan-move {
    0% { transform: perspective(600px) rotateY(-20deg) rotateX(5deg) scale(0.95); }
    50% { transform: perspective(600px) rotateY(0deg) rotateX(0deg) scale(1); }
    100% { transform: perspective(600px) rotateY(20deg) rotateX(-5deg) scale(0.95); }
}

/* Line Drawing & Pulsing */
.face-mesh-line {
  stroke: rgba(0, 255, 255, 0.7);
  stroke-width: 0.5;
  stroke-dasharray: 150;
  stroke-dashoffset: 150;
  animation: 
    draw-line-grow 0.8s ease-out forwards,
    pulse-line-opacity 3s infinite ease-in-out;
}

@keyframes draw-line-grow {
  to { stroke-dashoffset: 0; }
}

@keyframes pulse-line-opacity {
  0%, 100% { stroke-opacity: 0.3; stroke: rgba(0,255,255,0.3); stroke-width: 0.5; }
  50% { stroke-opacity: 1; stroke: rgba(200,255,255,0.9); stroke-width: 0.8; filter: drop-shadow(0 0 2px cyan); }
}

/* Nodes Pop-in & Pulse */
.face-mesh-node-group {
    opacity: 0;
    animation: node-pop-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

.face-mesh-node {
    fill: #0ff;
    filter: drop-shadow(0 0 4px rgba(0, 255, 255, 0.8));
}

.face-mesh-node-pulse {
    fill: none;
    stroke: #0ff;
    stroke-width: 0.5;
    opacity: 0;
    animation: node-pulse-ring 2s infinite;
    transform-box: fill-box;
    transform-origin: center;
}

@keyframes node-pop-in {
    from { opacity: 0; transform: scale(0); }
    to { opacity: 1; transform: scale(1); }
}

@keyframes node-pulse-ring {
    0% { transform: scale(1); opacity: 0.8; stroke-width: 1; }
    100% { transform: scale(4); opacity: 0; stroke-width: 0; }
}

/* === AML Tag Animation === */
.animate-aml-tag .connecting-line {
  animation: draw-line 0.4s ease-out forwards 1.0s;
  width: 0; /* Start at 0 width */
}

.animate-aml-tag .tag-icon {
  opacity: 0;
  transform: translateY(-20px) scale(0.7);
  animation: 
    tag-icon-appear 0.5s ease-out forwards 1.2s,
    icon-glow-pink 2s infinite ease-in-out 2.2s; /* Add glow, start after drawing */
}

/* AML Icon SVG Styles */
.aml-icon-shield {
  stroke-dasharray: 100;
  stroke-dashoffset: 100;
  animation: draw-path 0.6s ease-out forwards 1.5s; /* Start after icon starts appearing */
}

.aml-icon-checkmark {
  stroke-dasharray: 20;
  stroke-dashoffset: 20;
  animation: draw-path 0.3s ease-out forwards 2.0s; /* Start after shield is mostly drawn */
}

.animate-aml-tag .tag-box {
  opacity: 0; /* Start invisible */
  transform: translateY(20px) scale(0.8); /* Initial state for animation */
  animation: 
    tag-appear 0.5s ease-out forwards 1.2s,
    tag-pulse-glow 1s ease-in-out forwards 1.7s;
}

/* === eKYC Tag Animation === */
.animate-ekyc-tag .connecting-line {
    animation: draw-line 0.4s ease-out forwards 4.0s; /* Staggered start */
    width: 0;
}

.animate-ekyc-tag .tag-icon {
    opacity: 0;
    transform: translateY(-20px) scale(0.7);
    animation: 
      tag-icon-appear 0.5s ease-out forwards 4.2s, /* Staggered start */
      icon-glow-green 2s infinite ease-in-out 5.3s; /* Staggered start */
}

/* eKYC Icon SVG Styles */
.ekyc-icon-card {
    stroke-dasharray: 100;
    stroke-dashoffset: 100;
    animation: draw-path 0.8s ease-out forwards 4.5s; /* Staggered start */
}

.ekyc-icon-checkmark {
    stroke-dasharray: 20;
    stroke-dashoffset: 20;
    animation: draw-path 0.3s ease-out forwards 5.0s; /* Staggered start */
}

.animate-ekyc-tag .tag-box {
    opacity: 0;
    transform: translateY(20px) scale(0.8);
    animation: 
      tag-appear 0.5s ease-out forwards 4.2s, /* Staggered start */
      tag-pulse-glow-green 1s ease-in-out forwards 4.7s; /* Staggered start */
}

/* === World Check Tag Animation === */
.animate-world-check-tag .connecting-line {
  animation: draw-line 0.4s ease-out forwards 7.0s; /* Staggered start */
  width: 0;
}

.animate-world-check-tag .tag-icon {
  opacity: 0;
  transform: translateY(-20px) scale(0.7);
  animation: 
    tag-icon-appear 0.5s ease-out forwards 7.2s, /* Staggered start */
    icon-glow-cyan 2s infinite ease-in-out 8.3s; /* Staggered start */
}

/* World Check Icon SVG Styles */
.world-check-icon-globe {
  stroke-dasharray: 200;
  stroke-dashoffset: 200;
  animation: draw-path 0.8s ease-out forwards 7.5s; /* Staggered start */
}

.world-check-icon-checkmark {
  stroke-dasharray: 20;
  stroke-dashoffset: 20;
  animation: draw-path 0.3s ease-out forwards 8.0s; /* Staggered start */
}

.animate-world-check-tag .tag-box {
  opacity: 0;
  transform: translateY(20px) scale(0.8);
  animation: 
    tag-appear 0.5s ease-out forwards 7.2s, /* Staggered start */
    tag-pulse-glow-cyan 1s ease-in-out forwards 7.7s; /* Staggered start */
}


/* === Keyframes & Shared Styles === */
@keyframes draw-line {
  to { width: 4rem; /* Equivalent of w-16 in Tailwind */ }
}

@keyframes tag-icon-appear {
  0% { opacity: 0; transform: translateY(-20px) scale(0.7); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes draw-path {
  to { stroke-dashoffset: 0; }
}

@keyframes icon-glow-pink {
  50% { filter: drop-shadow(0 0 12px rgba(236, 72, 153, 1)); }
}

@keyframes icon-glow-cyan {
  50% { filter: drop-shadow(0 0 12px rgba(34, 211, 238, 1)); }
}

@keyframes icon-glow-green {
  50% { filter: drop-shadow(0 0 12px rgba(74, 222, 128, 1)); }
}

@keyframes tag-appear {
  0% { opacity: 0; transform: translateY(20px) scale(0.8); }
  80% { opacity: 1; transform: translateY(-5px) scale(1.05); } /* Overshoot */
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes tag-pulse-glow {
  50% { 
    box-shadow: 0 0 25px rgba(236, 72, 153, 1), 0 0 10px rgba(236, 72, 153, 0.8) inset; 
    border-color: rgb(244 114 182);
    text-shadow: 0 0 8px rgba(244, 114, 182, 0.8);
  }
}

@keyframes tag-pulse-glow-cyan {
  50% { 
    box-shadow: 0 0 25px rgba(34, 211, 238, 1), 0 0 10px rgba(34, 211, 238, 0.8) inset; 
    border-color: rgb(103 232 249);
    text-shadow: 0 0 8px rgba(103, 232, 249, 0.8);
  }
}

@keyframes tag-pulse-glow-green {
    50% { 
      box-shadow: 0 0 25px rgba(74, 222, 128, 1), 0 0 10px rgba(74, 222, 128, 0.8) inset; 
      border-color: rgb(134 239 172);
      text-shadow: 0 0 8px rgba(134, 239, 172, 0.8);
    }
}

/* === Verified Info Text Animation === */
.animate-name-position {
  opacity: 0;
  animation: fade-in-up 0.6s ease-out forwards 8.5s; /* After tags */
}

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* === PEP Detected Tag Animation === */
.animate-pep-tag {
    opacity: 0;
    animation: pep-appear-alert 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards 11.1s; /* After name + 2s delay */
}

@keyframes pep-appear-alert {
    0% {
        opacity: 0;
        transform: scale(0.8) translateX(-50%);
    }
    50% {
        opacity: 1;
        transform: scale(1.1) translateX(-50%);
        box-shadow: 0 0 30px rgba(250, 204, 21, 1), 0 0 15px rgba(250, 204, 21, 0.8) inset;
        border-color: rgb(252 211 77);
        text-shadow: 0 0 10px rgba(252, 211, 77, 0.9);
    }
    100% {
        opacity: 1;
        transform: scale(1) translateX(-50%);
        box-shadow: 0 0 25px rgba(250, 204, 21, 0.8), 0 0 10px rgba(250, 204, 21, 0.6) inset;
        border-color: rgb(252 211 77);
        text-shadow: 0 0 8px rgba(252, 211, 77, 0.7);
    }
}

/* === Risk High Text === */
.risk-high-text {
  color: #ef4444; /* red-500 */
  font-size: 1.1rem; /* like text-lg */
  font-weight: bold;
  letter-spacing: 0.1em;
  opacity: 0;
  margin-bottom: 0.5rem; /* Spacing above name */
  animation: risk-appear-glitch 2s forwards 13.6s; /* After PEP + 3s delay */
}

@keyframes risk-appear-glitch {
  0% {
    opacity: 0;
    transform: scale(1.2);
    text-shadow: none;
  }
  20% {
    opacity: 1;
    color: #67e8f9; /* cyan-300 */
    transform: translate(-5px, 2px) scale(1.2);
    text-shadow: 5px -2px 0 #ec4899; /* pink-500 */
  }
  40% {
    color: #ef4444; /* red-500 */
    transform: translate(3px, -3px) scale(1.2);
    text-shadow: -3px 3px 0 #67e8f9;
  }
  60% {
    opacity: 1;
    transform: scale(1.2);
    text-shadow: 0 0 15px rgba(239, 68, 68, 1);
  }
  100% {
    opacity: 1;
    transform: scale(1);
    text-shadow: 0 0 10px rgba(239, 68, 68, 1), 0 0 20px rgba(239, 68, 68, 0.8), 0 0 40px rgba(255, 0, 0, 0.7);
  }
}

/* === FSA Popup Overlay Animation === */
.animate-fade-in {
    animation: fade-in 0.5s ease-out forwards;
}

.animate-slide-in-up {
    animation: slide-in-up 0.5s cubic-bezier(0.25, 1, 0.5, 1) forwards;
}

@keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slide-in-up {
    from {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* === FSA Popup Typing Animation === */
.typing-cursor {
  display: inline-block;
  background-color: #67e8f9; /* cyan-300 */
  width: 2px;
  height: 1.2em;
  animation: blink 0.75s step-end infinite;
  margin-left: 2px;
  transform: translateY(0.15em);
}

@keyframes blink {
  from, to { background-color: transparent; }
  50% { background-color: #67e8f9; }
}


/* === Onboarded / Welcome Animation === */
.animate-onboard-glow {
    animation: 
        onboard-glow 2s ease-in-out infinite alternate,
        fade-in-scale-up 0.5s ease-out forwards;
    opacity: 0;
}

@keyframes onboard-glow {
    from {
        text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #0ff, 0 0 40px #0ff;
    }
    to {
        text-shadow: 0 0 20px #fff, 0 0 30px #4df, 0 0 40px #4df, 0 0 50px #4df, 0 0 60px #4df;
    }
}

@keyframes fade-in-scale-up {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.welcome-text-container {
    animation: fade-in-up 1s ease-out forwards;
}

.animate-proceed-button-welcome {
    opacity: 0;
    animation: fade-in-up 0.6s ease-out forwards 1.2s;
}

/* Utilities for flicker text */
.flicker-text {
    animation: flicker-text-anim 3s infinite;
}

@keyframes flicker-text-anim {
    0%, 100% { opacity: 1; }
    41.99% { opacity: 1; }
    42% { opacity: 0.6; }
    43% { opacity: 1; }
    95% { opacity: 1; }
    96% { opacity: 0.8; }
    97% { opacity: 1; }
}
